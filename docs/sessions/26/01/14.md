# 2026-01-14

## 本次目标

- 将“是否由设备本地 txt 导出生成 Excel”的判别规则固化到更正流水线中，并输出可审计证据。

## 修改内容

- 在 `src/behavioral_preprocess/app_data/app_sequence_correction.py` 新增导出来源判别函数：
  - 以 `空屏时长` 列是否在所有任务 sheet 中都存在作为强特征：全覆盖判为 `txt_export`，否则判为 `web_export`。
  - 输出证据字段：相关 sheet 数、包含该列的 sheet 数、缺失该列的 sheet 列表等。
- 在 `scripts/correct_app_workbooks.py` 中接入上述判别，并写入：
  - `manifest.csv`：`export_source`、`blank_screen_in_all_sheets`
  - `decisions/<subject_id>.json`：`export_source` 及 `export_source_evidence`
- 更新文档：
  - `docs/reports/app_data_format.md`：新增“txt 导出判别（临时规则）”章节，说明规则与输出位置。
  - `docs/reports/app_sequence_correction_report.md`：补充 manifest/decisions 中包含导出来源字段，并更新局限性描述。

