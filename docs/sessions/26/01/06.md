# 2026-01-06

## 本次目标

- 实现临时脚本：基于 CIBR app 行为工作簿中各 sheet 的 `正式阶段刺激图片/Item名` 列，将“所有任务刺激完全相同”的被试分组，并输出每组的 sublist（字符串排序）。

## 变更摘要

- 新增脚本：`temp/group_app_stimulus_groups.py`
  - 默认读取 `data/raw/behavior_data/cibr_app_data/` 下所有 `*.xlsx`（每位被试一个工作簿）。
  - 分组规则：允许被试缺少部分任务（sheet）；只要两名被试共同存在的任务中刺激条目完全一致，则可分到同一组（可用 `--compare-mode set` 改为集合比较）。
- 分组列已调整为 `正式阶段正确答案`（按答案序列分组；仍会对纯数字值进行前导 0 规整）。
  - 输出到 `data/interim/behavioral_preprocess/stimulus_groups/`：每组一个 `group_###_sublist.txt`，并生成 `groups_manifest.csv/json`。
- 配置扩展：在 `configs/paths.yaml` 增加 `dataset.behavioral.interim_preprocess_dir`，用于集中管理行为预处理的 `data/interim/` 子目录。
- 文档更新：在 `docs/workflow.md` 增加“行为刺激一致性分组（全样本）”小节，记录输入/输出与运行方式。

## 运行命令

```bash
python temp/group_app_stimulus_groups.py --dataset EFNY --config configs/paths.yaml
```
